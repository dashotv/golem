package app

import (
	"fmt"
	"time"

	"github.com/pkg/errors"
	"github.com/robfig/cron/v3"
)

func (s *Server) Cron() error {
	if cfg.Cron {
		c := cron.New(cron.WithSeconds())

		// every 5 minutes
		// if _, err := c.AddFunc("0 */5 * * * *", s.DoSomething); err != nil {
		// 	return errors.Wrap(err, "adding cron function")
		// }

		go func() {
			s.Log.Info("starting cron...")
			c.Start()
		}()
	}

	return nil
}

func (s *Server) DoSomething() {
	s.Log.Info("doing something...")
}
